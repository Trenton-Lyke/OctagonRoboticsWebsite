<!DOCTYPE HTML>
<!--Samuel Anozie 12/18/18. This is the form that the user both signs up and logs in with.-->
<html id = "newform">
<head>
<meta charset="UTF-8">
<title>Log in - SchoolBoard</title>

<!-- Bootstrap Links -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

<!--Form CSS Links (add shoutout)-->
<link rel="stylesheet" type="text/css" href="normalize.css" />
<link rel="stylesheet" type="text/css" href="component.css" />
<script src="modernizr.custom.js"></script>

<!--My Styles-->
<link rel = stylesheet href = "styles.css"/>
<link rel = "icon" href = "favicon.png" type = "image/jpg"/>
</head>
<body>
	<div id = "header" class = "container-fluid justify-content-center">
		<div class = "col-md-3">
			<img href = "index.html" class = "logo img-fluid" src = "WhiteLogoWithFlowers.svg" alt = "header"/>
		</div>
	</div>
	<div class = "container">
		<div class = "row text-center">
			<div class = "col-md-12">
				<h1>SIGNUP</h1>
			</div>
		</div>
	</div>
	<form class = "text-center" method = "post" enctype="multipart/form-data" action = "/signup">
		<div class = "container">
			<div class = "row">
				<div class = "col-md-12">
					<div class = "form-group justify-content-center">
						<input class = "names mx-auto" type = "text" name = "first_name" placeholder = "First Name" required><input class = "names mx-auto" type = "text" name = "last_name" placeholder = "Last Name" required>
					</div>
				</div>
			</div>
		</div>
		<div id = "theForm" class="simform" autocomplete="off">
			<div class="simform-inner">
							<ol class="questions">
								<li>
									<span><label for="username">Enter your Username</label></span>
									<input id = "username" type = "text" name = "username"  required>
								</li>
								<li>
									<span><label for="psw">Enter your password</label></span>
									<input type="password" id="psw" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters" name = "password" required>
								</li>
								<li>
									<span><label for="pass2">Confirm your password</label></span>
									<input type = "password" name = "confirmPassword" placeholder = "Confirm Password" onkeyup="checkPass(); return false;" required id = "pass2">
								</li>
								<li>
									<span><label for="email">Email</label></span>
									<input type = "email" name = "email" placeholder = "Email"  required id = "email">
								</li>
								<li>
									<span><label for="team_name">Team Name</label></span>
									<input type = "text" name = "team_name" placeholder = "Team Name"  required id = "team_name">
								</li>
								<li>
									<span><label for="team_sumber">Team Number</label></span>
									<input type = "text" name = "team_number" placeholder = "Team Number"  required id = "team_number">
								</li>
							</ol><!-- /questions -->
							<button class="submit" type="submit">Send answers</button>
							<div class="controls">
								<button class="next"></button>
								<div class="progress"></div>
								<span class="number">
									<span class="number-current"></span>
									<span class="number-total"></span>
								</span>
								<span class="error-message"></span>
							</div><!-- / controls -->
						</div><!-- /simform-inner -->
					<span class="final-message"></span>
			<!--<input id = "username" type = "text" name = "username" placeholder = "Username" required>
			<!--the following code was obtained from W3 schools. It does two functions: First, it checks the "confirm password" field with the normal password one and makes sure they are the same. If they are not the same, it prompts the user to try again. Secondly, it makes sure that when the user is putting in passwords, it uses extra characters and a character minimum to ensure a secure password. Wouldn't want other people snooping to see their score on a math quiz, would we now?
			<input class = "form-control" type="password" id="psw" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters" name = "password" placeholder = "Password" required>
			<input class = "form-control" type = "password" name = "password" placeholder = "Confirm Password" onkeyup="checkPass(); return false;" required id = "pass2"><br/>
		<p>*Do not use your school account information*</p>-->
		</div>
	<span id="confirmMessage" class="confirmMessage"></span>
		<div id="message">

			<!--this code segment is from w3 schools. Using it to validate the password to meet specific requirements.-->
	  <h3>Password must contain the following:</h3>
	  <p id="letter" class="invalid">A <b>lowercase</b> letter</p>
	  <p id="capital" class="invalid">A <b>capital (uppercase)</b> letter</p>
	  <p id="number" class="invalid">A <b>number</b></p>
	  <p id="length" class="invalid">Minimum <b>8 characters</b></p>
	</div>
	<div class="custom-file">
    <input type="file" class="custom-file-input" type="file" name="profile_picture" id="design_file" accept=".jpg,.png,.gif,.jpeg,.svg" required>
    <label class="custom-file-label" for="design_file">Profile Picture</label>
  </div>
	<div id = "submit" class = "submit"></div><br>
</form>
<script>
function checkPass()
    {
        //Store the password field objects into variables ...
        var pass1 = document.getElementById('psw');
        var pass2 = document.getElementById('pass2');
        //Store the Confimation Message Object ...
        var message = document.getElementById('confirmMessage');
        //Set the colors we will be using ...
        var goodColor = "#66cc66";
        var badColor = "#ff6666";
        //Compare the values in the password field
        //and the confirmation field
        if (pass1.value == pass2.value){
            //The passwords match.
            //Set the color to the good color and inform
            //the user that they have entered the correct password
            pass2.style.backgroundColor = goodColor;
            message.style.color = goodColor;
            message.innerHTML = "Passwords Match!"
            document.getElementById("submit").innerHTML = "<input type = 'submit' value = 'Register'>";
        }
        else {
            //The passwords do not match.
            //Set the color to the bad color and
            //notify the user.
            pass2.style.backgroundColor = badColor;
            message.style.color = badColor;
            message.innerHTML = "Passwords Do Not Match!";
            document.getElementById("submit").innerHTML = "";
        }
    }
//this is the function that switches what form is displayed. it takes a parameter which is the id of the span.

	//all the following code is from w3 schools. This code is the javascript needed to validate the password input so that it meets specific requirements.
var myInput = document.getElementById("psw");
var letter = document.getElementById("letter");
var capital = document.getElementById("capital");
var number = document.getElementById("number");
var length = document.getElementById("length");

// When the user clicks on the password field, show the message box
myInput.onfocus = function() {
    document.getElementById("message").style.display = "block";
}

// When the user clicks outside of the password field, hide the message box
myInput.onblur = function() {
    document.getElementById("message").style.display = "none";
}

// When the user starts to type something inside the password field
myInput.onkeyup = function() {
  // Validate lowercase letters
  var lowerCaseLetters = /[a-z]/g;
  if(myInput.value.match(lowerCaseLetters)) {
    letter.classList.remove("invalid");
    letter.classList.add("valid");
  } else {
    letter.classList.remove("valid");
    letter.classList.add("invalid");
  }

  // Validate capital letters
  var upperCaseLetters = /[A-Z]/g;
  if(myInput.value.match(upperCaseLetters)) {
    capital.classList.remove("invalid");
    capital.classList.add("valid");
  } else {
    capital.classList.remove("valid");
    capital.classList.add("invalid");
  }

  // Validate numbers
  var numbers = /[0-9]/g;
  if(myInput.value.match(numbers)) {
    number.classList.remove("invalid");
    number.classList.add("valid");
  } else {
    number.classList.remove("valid");
    number.classList.add("invalid");
  }

  // Validate length
  if(myInput.value.length >= 8) {
    length.classList.remove("invalid");
    length.classList.add("valid");
  } else {
    length.classList.remove("valid");
    length.classList.add("invalid");
  }
}
</script>
<script src="classie.js"></script>
		<script src="stepsForm.js"></script>
		<script>
			var theForm = document.getElementById( 'theForm' );
			var pass1 = document.getElementById('psw');
			var pass2 = document.getElementById('pass2');
			new stepsForm( theForm, {
				onSubmit : function( form ) {
					// hide form
					if (pass1.value == pass2.value) {
						classie.addClass( theForm.querySelector( '.simform-inner' ), 'hide' );
						/*
						form.submit()
						or
						AJAX request (maybe show loading indicator while we don't have an answer..)
						*/

						// let's just simulate something...
						var messageEl = theForm.querySelector( '.final-message' );
						messageEl.innerHTML = 'Thank you! You may register below.';
						classie.addClass( messageEl, 'show' );
					}
					else {
						//right now the whole page will reload if the passwords arent the same. Fix later.
						if(!alert('Make sure your passwords are the same')){window.location.reload();}
					}
				}
			} );
		</script>
</body>
</html>
